---
title: "Timeseries objects in R"
output: github_document
---

__To add__: `times()` function to extract times from a `ts` object. How to deal with the `start` and `end` arguments when declaring a `ts` object.

This tutorial demonstrates `timeseries` objects, and `stl` decomposition.

Let's make a periodic time series with a trend. The data can be contained in a vector:

```{r}
p <- 10
n <- 20*p
dat <- 100 + sqrt(1:n) + 5*sin(1:n * 2*pi/p) + rnorm(n)
```

It's sometimes useful to make an object of type `timeseries`. Do this with the `ts` function in R. But, if there's a cycle, we'll need to indicate that in the `frequency` argument, which is the number of observations per cycle. In this case, the period is `r p`. 

```{r}
(datts <- ts(dat, frequency = p))
```

You can plot this object too. You'll get a nice looking time series plot:

```{r fig.height=3}
plot(datts)
```

And now you can decompose the trend, seasonal component, and error terms with `stl`. Note that `stl` requires a `timeseries` object! Be sure to put `s.window="periodic"` in the `stl` function to use the periodicity of the `timeseries` object. Notice that there are options to change the bandwidths of the loess estimation, along with the degree of the local polynomial, with the `_.degree` and `_.window` arguments.  

```{r}
fit <- stl(datts, s.window="periodic")
```

The estimates are contained in the `$time.series` part of the output:

```{r}
head(fit$time.series)
```
